CREATE TABLE IF NOT EXISTS task.USER_DETAILS (
USER_ID INT(11) NOT NULL AUTO_INCREMENT,
FIRST_NAME VARCHAR(45) NOT NULL,
LAST_NAME VARCHAR(45) NOT NULL,
EMPLOYEE_ID INT(11) NOT NULL,
STATUS VARCHAR(1) NOT NULL,
PRIMARY KEY (USER_ID));

drop table task.TASK_DETAILS;
CREATE TABLE IF NOT EXISTS task.TASK_DETAILS (
TASK_ID INT(11) NOT NULL AUTO_INCREMENT,
TASK_NAME VARCHAR(45) NOT NULL,
START_DATE DATE NOT NULL,
END_DATE DATE NOT NULL,
PRIORITY INT(11) NOT NULL,
STATUS VARCHAR(45) NOT NULL,
USER_ID_FK INT(11) NOT NULL,
PARENT_ID_FK INT(11) NULL,
PROJECT_ID_FK INT(11) NOT NULL,
PRIMARY KEY (TASK_ID),
FOREIGN KEY (USER_ID_FK)  REFERENCES task.USER_DETAILS (USER_ID),
FOREIGN KEY (PARENT_ID_FK)  REFERENCES task.PARENT_TASK_LIST (PARENT_ID),
FOREIGN KEY (PROJECT_ID_FK)  REFERENCES task.PROJECT (PROJECT_ID)
);

drop table task.TASK_DETAILS;
CREATE TABLE IF NOT EXISTS task.TASK_DETAILS (
TASK_ID INT(11) NOT NULL AUTO_INCREMENT,
TASK_NAME VARCHAR(45) NOT NULL,
START_DATE DATE NOT NULL,
END_DATE DATE NOT NULL,
PRIORITY INT(11) NOT NULL,
STATUS VARCHAR(45) NOT NULL,
USER_ID_FK INT(11) NOT NULL,
PARENT_ID INT(11) DEFAULT NULL,
PROJECT_ID_FK INT(11) NOT NULL,
PRIMARY KEY (TASK_ID),
FOREIGN KEY (USER_ID_FK)  REFERENCES task.USER_DETAILS (USER_ID),
FOREIGN KEY (PARENT_ID)  REFERENCES task.PARENT_TASK_LIST (PARENT_ID),
FOREIGN KEY (PROJECT_ID_FK)  REFERENCES task.PROJECT (PROJECT_ID)
);

CREATE TABLE IF NOT EXISTS task.TASK_DETAILS (
TASK_ID INT(11) NOT NULL AUTO_INCREMENT,
TASK_NAME VARCHAR(45) NOT NULL,
START_DATE DATE NOT NULL,
END_DATE DATE NOT NULL,
PRIORITY INT(11) NOT NULL,
STATUS VARCHAR(45) NOT NULL,
USER_ID_FK INT(11) NOT NULL,
PROJECT_ID_FK INT(11) NOT NULL,
PRIMARY KEY (TASK_ID),
FOREIGN KEY (USER_ID_FK)  REFERENCES task.USER_DETAILS (USER_ID),
FOREIGN KEY (PROJECT_ID_FK)  REFERENCES task.PROJECT (PROJECT_ID)
);



CREATE TABLE IF NOT EXISTS task.PROJECT (
PROJECT_ID INT(11) NOT NULL AUTO_INCREMENT,
PROJECT_NAME VARCHAR(45) NOT NULL,
PRIMARY KEY (PROJECT_ID));

drop table task.PROJECT;
CREATE TABLE IF NOT EXISTS task.PROJECT (
PROJECT_ID INT(11) NOT NULL AUTO_INCREMENT,
PROJECT_NAME VARCHAR(45) NOT NULL,
USER_ID_FK INT(11) NOT NULL,
START_DATE DATE,
END_DATE DATE,
PRIORITY INT(11) NOT NULL,
STATUS VARCHAR(45) NOT NULL,
TASK_COUNT INT(11) NOT NULL,
TASK_COMPLETED INT(11) NOT NULL,
PRIMARY KEY (PROJECT_ID),
FOREIGN KEY (USER_ID_FK)  REFERENCES task.USER_DETAILS (USER_ID));

CREATE TABLE IF NOT EXISTS task.PARENT_TASK_LIST (
PARENT_ID INT(11) AUTO_INCREMENT,
PARENT_TASK_NAME VARCHAR(45),
PRIMARY KEY (PARENT_ID));

drop table PARENT_TASK_LIST;
drop table task.TASK_DETAILS;